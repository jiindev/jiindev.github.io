<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><meta name="generator" content="Gatsby 2.21.22"/><style data-styled="" data-styled-version="5.1.0">.iuYNFk{-webkit-text-decoration:none;text-decoration:none;color:black;}/*!sc*/
data-styled.g1[id="navigation__StyledLink-uh3hx4-0"]{content:"iuYNFk,"}/*!sc*/
.hJCdPQ{float:right;padding:5px;cursor:pointer;margin-right:15px;display:none;width:40px;vertical-align:middle;}/*!sc*/
.hJCdPQ span,.hJCdPQ:after,.hJCdPQ:before{background-color:#000;content:'';display:block;height:5px;margin:7px 0;-webkit-transition:all .2s ease-in-out;transition:all .2s ease-in-out;}/*!sc*/
.hJCdPQ span{-webkit-transform:none;-ms-transform:none;transform:none;}/*!sc*/
.hJCdPQ:after{-webkit-transform:none;-ms-transform:none;transform:none;}/*!sc*/
.hJCdPQ:before{-webkit-transform:none;-ms-transform:none;transform:none;}/*!sc*/
@media only screen and (max-width:767px){.hJCdPQ{display:inline-block;}}/*!sc*/
data-styled.g2[id="navigation__HamburgerButton-uh3hx4-1"]{content:"hJCdPQ,"}/*!sc*/
.fTvCKL{position:fixed;width:100%;box-sizing:border-box;z-index:999;background-color:rgba(255,255,255,.85);border-bottom:1px solid white;}/*!sc*/
.fTvCKL ul{float:right;margin-right:10px;width:auto;padding:10px 0;}/*!sc*/
.fTvCKL li{float:left;font-weight:700;-webkit-transition:all .2s ease;transition:all .2s ease;padding:10px 15px;margin:3px 5px 0 5px;}/*!sc*/
.fTvCKL li:after{content:'';display:block;width:0%;border-bottom:3px solid;margin-top:5px;-webkit-transition:all .2s ease;transition:all .2s ease;}/*!sc*/
.fTvCKL li:hover:after{width:100%;}/*!sc*/
@media only screen and (max-width:767px){.fTvCKL{padding-bottom:0;}.fTvCKL ul{width:100%;padding-bottom:30px;-webkit-transition:all 1s ease;transition:all 1s ease;overflow:hidden;display:none;}.fTvCKL li{text-align:center;width:100%;margin:0;padding:30px 15px;}.fTvCKL li:after{display:none;}}/*!sc*/
data-styled.g3[id="navigation__Nav-uh3hx4-2"]{content:"fTvCKL,"}/*!sc*/
.diVGAv{font-size:24px;text-align:left;font-weight:700;vertical-align:center;padding:10px 0 10px 15px;display:inline-block;}/*!sc*/
@media only screen and (max-width:767px){.diVGAv{font-size:18px;}}/*!sc*/
data-styled.g4[id="navigation__LOGO-uh3hx4-3"]{content:"diVGAv,"}/*!sc*/
.dHIZtV{position:relative;}/*!sc*/
data-styled.g5[id="layout__Page-sc-4dh0yk-0"]{content:"dHIZtV,"}/*!sc*/
.efwcgu{position:absolute;bottom:0;width:100%;box-sizing:border-box;text-align:center;padding:10px 0;font-size:12px;}/*!sc*/
.efwcgu a{-webkit-text-decoration:none;text-decoration:none;color:black;font-weight:700;}/*!sc*/
data-styled.g6[id="layout__Footer-sc-4dh0yk-1"]{content:"efwcgu,"}/*!sc*/
.iztAUF{font-size:48px;font-weight:700;text-align:center;padding:100px 15px 50px 15px;-webkit-transition:all .2s ease;transition:all .2s ease;}/*!sc*/
@media only screen and (max-width:767px){.iztAUF{font-size:36px;}}/*!sc*/
data-styled.g7[id="blog-post__H2-mwynvp-0"]{content:"iztAUF,"}/*!sc*/
.dCEmhm{text-align:center;margin:-30px 0 50px 0;font-size:18px;}/*!sc*/
data-styled.g8[id="blog-post__Date-mwynvp-1"]{content:"dCEmhm,"}/*!sc*/
.gcLchA{line-height:2;padding:30px 30px 100px 30px;box-sizing:border-box;font-size:16px;}/*!sc*/
.gcLchA h4{font-size:24px;font-weight:700;padding:30px 0 10px;}/*!sc*/
.gcLchA img{display:block;margin:30px auto;max-width:100%;}/*!sc*/
.gcLchA a{font-weight:700;color:#a0a0a0;}/*!sc*/
.gcLchA strong{font-weight:700;}/*!sc*/
.gcLchA pre{background-color:#3a3a3a;color:white;padding:10px 30px;margin:15px 0;border-radius:5px;font-size:14px;font-weight:300;max-width:100%;box-sizing:border-box;line-height:1.4;overflow-x:auto;}/*!sc*/
.gcLchA li{list-style:disc;margin-left:15px;}/*!sc*/
.gcLchA iframe{max-width:100%;}/*!sc*/
.gcLchA ol li{list-style:decimal;}/*!sc*/
data-styled.g9[id="blog-post__Content-mwynvp-2"]{content:"gcLchA,"}/*!sc*/
html,body,div,span,applet,object,iframe,h1,h2,h3,h4,h5,h6,p,blockquote,pre,a,abbr,acronym,address,big,cite,code,del,dfn,em,img,ins,kbd,q,s,samp,small,strike,strong,sub,sup,tt,var,b,u,i,center,dl,dt,dd,ol,ul,li,fieldset,form,label,legend,table,caption,tbody,tfoot,thead,tr,th,td,article,aside,canvas,details,embed,figure,figcaption,footer,header,hgroup,main,menu,nav,output,ruby,section,summary,time,mark,audio,video{margin:0;padding:0;border:0;font-size:100%;font:inherit;vertical-align:baseline;}/*!sc*/
article,aside,details,figcaption,figure,footer,header,hgroup,main,menu,nav,section{display:block;}/*!sc*/
*[hidden]{display:none;}/*!sc*/
body{line-height:1;}/*!sc*/
ol,ul{list-style:none;}/*!sc*/
blockquote,q{quotes:none;}/*!sc*/
blockquote:before,blockquote:after,q:before,q:after{content:'';content:none;}/*!sc*/
table{border-collapse:collapse;border-spacing:0;}/*!sc*/
html,body{height:100%;}/*!sc*/
body{font-size:14px;font-family:'Montserrat','Noto Sans KR',san-serif;}/*!sc*/
.center{width:100%;max-width:1024px;margin:0 auto;}/*!sc*/
.center.post{max-width:800px;}/*!sc*/
data-styled.g33[id="sc-global-fMTMJP1"]{content:"sc-global-fMTMJP1,"}/*!sc*/
</style><title data-react-helmet="true">amplify로 갯츠비 배포하기</title><link data-react-helmet="true" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.8.2/css/all.min.css"/><link data-react-helmet="true" href="https://fonts.googleapis.com/css2?family=Montserrat:wght@200;300;500;600;700;800&amp;display=swap" rel="stylesheet"/><link data-react-helmet="true" href="http://fonts.googleapis.com/css?family=Noto+Sans" rel="stylesheet" type="text/css"/><meta data-react-helmet="true" name="description" content="아이디어스 클론코딩을 마친 후 배포를 하는 과정에서 여러 문제점에 직면했습니다.
포트폴리오 사이트를 github pages로 배포하여 진행하니 사이트 이용에 큰 불편함이 없어 이번에도 page…"/><meta data-react-helmet="true" property="og:description" content="아이디어스 클론코딩을 마친 후 배포를 하는 과정에서 여러 문제점에 직면했습니다.
포트폴리오 사이트를 github pages로 배포하여 진행하니 사이트 이용에 큰 불편함이 없어 이번에도 page…"/><link as="script" rel="preload" href="/webpack-runtime-4c0c9368b8c079b7161a.js"/><link as="script" rel="preload" href="/framework-4f6f95a87e6130d5bbab.js"/><link as="script" rel="preload" href="/app-483a03efaa2dba86e1e9.js"/><link as="script" rel="preload" href="/component---src-components-blog-post-js-ce321212caf5c2801d63.js"/><link as="fetch" rel="preload" href="/page-data/blog/gatsby-amplify/page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/app-data.json" crossorigin="anonymous"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><nav class="navigation__Nav-uh3hx4-2 fTvCKL"><div class="center"><a class="navigation__StyledLink-uh3hx4-0 iuYNFk" href="/"><span class="navigation__LOGO-uh3hx4-3 diVGAv">JIIN,<br/>DEV</span></a><span class="navigation__HamburgerButton-uh3hx4-1 hJCdPQ"><span></span></span><ul><a class="navigation__StyledLink-uh3hx4-0 iuYNFk" href="/about"><li>ABOUT</li></a><a class="navigation__StyledLink-uh3hx4-0 iuYNFk" href="/works"><li>WORKS</li></a><a class="navigation__StyledLink-uh3hx4-0 iuYNFk" href="/blog"><li>BLOG</li></a></ul></div></nav><div class="layout__Page-sc-4dh0yk-0 dHIZtV"><div><div style="transition:all 500ms ease-in-out;opacity:1"><h2 class="blog-post__H2-mwynvp-0 iztAUF">amplify로 갯츠비 배포하기</h2><div class="blog-post__Date-mwynvp-1 dCEmhm">by jiindev, <!-- -->2020. 6. 14</div><div class="blog-post__Content-mwynvp-2 gcLchA center post"><p>아이디어스 클론코딩을 마친 후 배포를 하는 과정에서 여러 문제점에 직면했습니다.
포트폴리오 사이트를 github pages로 배포하여 진행하니 사이트 이용에 큰 불편함이 없어 이번에도 page로 배포하고자 했는데, 기존에 블로그로 이미 해당 링크를 쓰고 있어서
jiindev.github.io/idus-cloneCoding
링크에 배포가 되면서, 사이트의 절대 경로와 일치하지 않아 static 파일을 제대로 불러오지 못한 것입니다.
이러한 경우 어떤 식으로 처리해야 하는지 공식문서에서 설명해주고 있긴 합니다.
<a href="https://www.gatsbyjs.org/docs/how-gatsby-works-with-github-pages/">공식 문서 설명</a>
<br/><br/>
gatsby-config.js 파일에 'pathPrefix: "/reponame"' 코드를 추가하고 gatsby pages에 배포하는 deploy 스크립트를 기존과 다른 형식으로 수정해주면 되는데요.
("deploy": "gatsby build --prefix-paths &#x26;&#x26; gh-pages -d public")
<br/><br/>
이런 식으로 공식문서를 따라가며 진행을 했지만 계속하여 루트경로에서 static 파일을 불러오는 문제점이 생겼습니다. pathPrefix가 적용이 되지 않은 건데요.
<br/><br/>
찾아보니 저뿐만 아니라 다른 분들도 같은 문제점을 겪고 있고, 이것이 갯츠비에서 고쳐야 할 버그라고들 하여 결국 해결점을 찾지 못하고 다른 방법으로 배포를 하기로 했습니다.
갯츠비 공식 문서에서 netlify를 이용한 배포방법에 대해 최상단에서 자세히 설명을 하고 있어, 이번엔 netlify를 이용하여 진행을 하기로 했습니다.
<br/><br/>
netlify는 굉장히 쉽게 연결할 수 있으며 깃허브에 변경사항이 있을 시 자동으로 빌드를 해주며 따로 도메인 연결이 필요없이 주소 또한 제 마음대로 커스텀할 수 있어 상당히 편리했으나 이후 또 문제가 발생했습니다.
<br/><br/>
netlify로 배포한 사이트의 속도가 너무 느렸던건데요. 처음에는 속도에 그렇게까지 불편함을 느끼지 못했으나, 시간에 따라서 사이트의 속도가 달라지는 것을 느꼈습니다. 사이트를 형성하고 이미지를 로딩하는데 너무 오랜 시간이 걸려 이용자가 불편함을 느낄 수 밖에 없는 속도였습니다. 찾아보니 서버가 미국에 있어 한국에서 사용할 경우 속도가 더뎌진다고 하네요.
<br/><br/>
구직용으로 배포중인 사이트이기에 속도개선의 필요성을 느꼈고 결국 다른 배포방법을 또 다시 찾아보게 되었습니다. 기존에 dreamwitch를 aws를 통해 배포했을 때에 속도에서 크게 문제를 느끼지 못했으므로 aws 배포 방법을 찾아보았습니다.</p>
<h4>aws Amplify</h4>
<p>갯츠비에서 amplify를 이용한 배포방법을 설명하고 있었으므로 자연스럽게 amplify를 선택하게 되었는데요. 이용해보니 깃허브의 특정 레포지토리와 연결하여 netlify처럼 변동사항이 있을때마다 자동으로 빌도하도록 처리가 가능했습니다.
<br/><br/>
자세한 배포방법이 한글로 작성된 포스팅을 찾아보지 못해서 이번에 amplify를 이용해 배포하면서 겪은 과정을 아카이빙 해보고자 합니다.</p>
<p><a href="https://www.gatsbyjs.org/docs/deploying-to-aws-amplify/">참고한 갯츠비 공식문서</a>
<br/><br/></p>
<ol>
<li>먼저 amplify 콘솔에 접근하여 Deploy 부분에서 get started를 클릭합니다.
<a href="https://console.aws.amazon.com/amplify/home">콘솔 바로가기</a>
(* 꼭 리전을 '서울'로 지정하고 진행하야 합니다. 저의 경우 이전 dreamwitch 작업에서 리전이 오하이주로 설정되어 있는걸 모른채 진행했다가 낭패를 봤습니다.TT)
<br/><br/></li>
</ol>
<p><img src="/blog/gatsby-amplify1.jpg" alt="레포지토리 선택화면 캡쳐"></p>
<ol start="2">
<li>시작하기를 누르면 어떤 저장소의 어떤 레포지토리에 연결할지를 택하라고 합니다.
저의 경우 Github를 선택하여 연결하고, 아이디어스 클론코딩을 진행한 idus-cloneCoding 레포지토리를 선택했습니다.
어떤 브랜치를 기준으로 할지를 선택합니다.</li>
</ol>
<p><br/><br/></p>
<p><img src="/blog/gatsby-amplify2.jpg" alt="빌드 설정 구성화면 챕쳐"></p>
<ol start="3">
<li>amplify가 자동으로 코드를 분석하여 빌드방법을 정리한 데이터를 보여줍니다.
npm run build 명령어를 이용하여 빌드하고, 빌드된 파일은 public 폴더에 위치하는 것을 알려주네요.
틀린 점이 있다면 고쳐주고, 문제점이 없다면 다음으로 넘어갑니다.</li>
</ol>
<p><br/><br/></p>
<p><img src="/blog/gatsby-amplify2.jpg" alt="검토화면 캡쳐"></p>
<ol start="4">
<li>마지막으로 설정한 내역을 한페이지에 보여줍니다.
잘못 입력한 부분이 없다면 저장 및 배포를 눌러주면 amplify가 배포작업을 시작합니다.</li>
</ol>
<p><img src="/blog/gatsby-amplify4.jpg" alt="배포화면 캡쳐"></p>
<ol start="5">
<li>배포는 버튼을 누른 즉시 되지는 않고, 제 체감으론 3분정도 기다렸던것 같습니다.
배포가 완료되면 이런 식으로 보여집니다. 접속하여 들어가보니 netlify로 배포했을 때보다 속도가 훨씬 개선됐음을 느낄 수 있었습니다. </li>
</ol>
<p><img src="/blog/gatsby-amplify5.jpg" alt="사이트 캡쳐">
링크가 복잡한 것이 눈에 거슬려 가비아에서 저렴한 도메인을 구매하여 연결작업을 진행중인데요.
SSL을 확인하는 데에서 시간이 꽤 오래 걸리네요.
도메인을 연결한 이후에 도메인 연결 과정도 추가하여 서술하도록 하겠습니다.</p>
<h4>속도 비교</h4>
<p><a href="https://jdus.netlify.app/">netlify로 배포</a></p>
<p><a href="https://www.jdus.site/">amplify로 배포</a></p></div><footer class="layout__Footer-sc-4dh0yk-1 efwcgu">© 2020 gatsby simple-dev-theme by <a href="https://github.com/jiindev" target="blank">jiindev</a></footer></div></div></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/blog/gatsby-amplify/";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"app":["/app-483a03efaa2dba86e1e9.js"],"component---src-components-blog-post-js":["/component---src-components-blog-post-js-ce321212caf5c2801d63.js"],"component---src-pages-404-js":["/component---src-pages-404-js-8befa26b40bb5eadf582.js"],"component---src-pages-about-js":["/component---src-pages-about-js-51abcedd8f63c746f44b.js"],"component---src-pages-blog-js":["/component---src-pages-blog-js-a7f0b3fc2914611e5517.js"],"component---src-pages-index-js":["/component---src-pages-index-js-cfead3231ec7a441fa26.js"],"component---src-pages-my-file-js":["/component---src-pages-my-file-js-95d1338f4cac547d5104.js"],"component---src-pages-works-js":["/component---src-pages-works-js-42515a378310f27683a5.js"]};/*]]>*/</script><script src="/component---src-components-blog-post-js-ce321212caf5c2801d63.js" async=""></script><script src="/app-483a03efaa2dba86e1e9.js" async=""></script><script src="/framework-4f6f95a87e6130d5bbab.js" async=""></script><script src="/webpack-runtime-4c0c9368b8c079b7161a.js" async=""></script></body></html>